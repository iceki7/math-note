
**推导Q的基本运算**

以下，**$a_{+}$表示比a大的数，x,y,z,w代表整数,p,q代表有理数。**

四则运算容易定义。定义乘方：
$$
p^{z/w}
=\sqrt[w]{p^{z}}
$$
开方的值用另一篇文章提到的逼近算法得到，当然，可能是无理数。

下面推导$\sqrt[w]{p_1p_2}$

设$\sqrt[w]{p_1},\sqrt[w]{p_2}$的柯西序列为$a_n,b_n$，

则
$$
\lim a_n^w=p_1，所以
\lim (a_n^wb_n^w)=\lim (a_nb_n)^w=p_1p_2,\\ 
$$

实数乘法被定义为柯西序列的依次相乘，

所以$\sqrt[w]{p_1p_2}=\sqrt[w]{p_1}\sqrt[w]{p_2}$

进一步地，
$$
p^{z/w+z'/w'}=\sqrt[ww']{p^{zw'+z'w}}=\sqrt[ww']{p^{zw'}p^{z'w}}\\=\sqrt[ww']{p^{zw'}}\sqrt[ww']{p^{z'w}}=p^{z/w}p^{z'/w'}
$$
以上，完成了指数取值为$\mathbb{Q}$时的定义。


---
**我们希望得到一个良好的性质：$a^x,x^a. a,x\in \mathbb{Q}$是单调区间组成的。**


这样我们才能确认函数曲线的确是我们通常画出来的那样。顺便，我们也才能用这种方法，把$a^x$的图像画出来。





证明:
要证
$$
\sqrt[y]{p^{x}}<\sqrt[y]{p^{x_+}}
$$
等价于证$\sqrt[y]{p}<\sqrt[y]{p_{+}}$，

以及$p^x<p^{x_+}$

第二个式子显然。

第一个式子的证明可参考构造根号2的那个文档。

**也就说明了函数$a^x$的分段单调。**

---
**要证函数$x^{a}$分段单调**,即证$\sqrt[w]{p_+^z}>\sqrt[w]{p^z}$，即证
$$p_+^z>p^z$$
易证。

---
**证$\sin x$分段单调**

由于角度可以取有理数，所以可直接使用它的几何意义证明。

---
**构造$\log_n y,n,y\in\mathbb{Q}$**


类似之前构造$\sqrt{2}$一样，同样需要一个逼近算法来定义它：

类似地，我们要证明算法数列$a_n$与它的误差能任意小，即
$$\lim n^{a_n}=y$$

---

**推导初等函数的导数**

导数是割线斜率的极限。
$$
割线k(p^z)=((p+q)^z-p^z)/q
\\=(C_z^1qp^{z-1}+...C_z^zq^z)/q
=(C_z^1p^{z-1}+...C_z^zq^{z-1})\rightarrow zp^{z-1}
$$

$$
k(p^{1/z})
$$
根据反函数割线斜率的公式，$\frac{\Delta x}{\Delta y}=(\frac{\Delta y}{\Delta x})^{-1}$

$p^{1/z}在R上是一个双射，所以
k(p^{1/z})\rightarrow z^{-1}(p^{1/z})^{1-z}=z^{-1}p^{1/z-1}$

所以
$$
\frac{d(x^{y/z})}{dx}=\frac{d(x^{y/z})}{d(x^y)}\frac{d(x^y)}{dx}=z^{-1}(x^y)^{1/z-1}yx^{y-1}=x^{y/z-1}yz^{-1}
$$


将指数拓展为有理数，也就将乘法化为了加法。

---
**广义二项式定理**


$$
(fg)^{(n)}
,(fg)^2=f'g+fg',(fg)^{(3)}=(fg)^{(2)}(fg)
$$
这是因为有下列对应关系：
$$
(x^n,\oplus,+),(',*,+)\\
a^{n}=a^{n-1}a\leftrightarrow a^{(n)}=a^{(n-1)}a'\\
(a\oplus b)^2=a^2+b^2+ab+ba\leftrightarrow (ab)'=0\times (a''+b'')+a'b+ab'
\\
(ab)^{(n)}可以视作是对符号'的分配：
\\=(ab)'(ab)'...(ab)'，\\所以在二项式中，它二选一的不是a和b，而是'。
(ab)^{(n)}=\sum_{i=1}^{n-1} C a^{(i)}b^{(n-i)}
$$

