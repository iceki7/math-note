**一个必要条件**

曲线下方$[x_0,x]$的面积定义一个函数（数分里管它叫一个测度，它需要满足测度的若干性质）$A(x)$



在曲线上一个单增区间上取点x，设：

$$
S=f(x)d
$$
$$
S'=(f(x+d)-f(x))d 
$$
$$
C=A(x+d)-A(x)-S
$$
于是
$$
\lim\frac{S'}{S}=0，假设f(x)\neq 0
$$
而$C<S'$,所以
$$
\lim \frac{C}{S}=
\lim\frac{C}{d}=0
$$
因此
$$
A'(x)=f(x)
$$

**小矩形分割**


以上还不足以证明A就是用小矩形逼近的面积。它只是面积函数的必要条件，即如果有面积函数A,那么它必须满足A'=f。


        但是，还必须证明小矩形逼近函数面积的误差是在减小的，而且是要多小有多小。
        可是，误差也有曲边，我们现在还没有完成对于曲边形状的面积的定义呢（实际上我们正在做这件事），怎么能定义误差面积的大小呢？

        我们可以先假设已经有了那么一个面积函数A，A会符合什么要求？首先，误差曲面既然能被包括在一些正方形中，那么我们要求它的面积函数比这些正方形的面积要小，这个想法是合理的。不仅合理，而且是必要的——这就是我们定义面积函数的初衷啊。如果一个图形能被另一个图形所包含但面积函数却大于它，那我们定义这个面积函数又有什么意义呢？

        所以误差的和肯定不超过这些正方形之和。
        而正方形面积趋近于零，因而这些误差也趋近于零。

        通过这种方式，我们才能把A定义出来，
        随后再检验之前那个假设是否成立即可。

上面只是思路，操作细节如下：
(来自知乎)

区间长度$D$,均匀分割成n段，$d=\frac{D}{n}$，每一段的误差为$C_i，C的含义和上面相同$，则：
$$
C_i\leq d^2k_i
$$
$k$是$S'$对角线的斜率。设$K$为$k_i$中的最大值，则
$$
\sum C_i\leq \sum d^2K^2=\frac{D^2K}{n}
$$
        解释1：因为K是割线斜率,可用拉格朗日中值定理将它归结为某个点的导数值。对于实际的应用场景，导函数几乎总是有最大值的。所以K有上界，即：
$$
\lim_{n\rightarrow +\infty}\frac{D^2K}{n}=0
$$
也就证明了$A$和小矩形分割方法的误差趋于无穷小。


        解释2：即便不归结于切线斜率，也可以本着一种实用的精神，认为实际生产生活中使用到的函数的割线斜率总是有最大值的（否则那种函数的现实意义该多么古怪呢？）


总结：由于面积包含了平方运算，因此面积误差是区间长度的二阶无穷小，对每个二阶无穷小进行一阶的无穷求和后，得到的仍然是一阶无穷小，再取极限就归为零了。