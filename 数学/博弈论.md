**博弈游戏模型**

<Zermelo's theorem>

把策略游戏看成有向图。一个节点就是一个状态。
双方交替走。直到到达某些“获胜节点”
并且走过的路径不与自身相交。
能不能为先手或者后手构造出一个必胜/必不败策略？

**一、如果这个图是一个树。**


假设α，β对弈，α先走。
A表示**α方必胜的节点**的集合。A中的元素记为a。
同样，β方也有节点集合B，节点b。
s(n)表示节点n的后继节点的集合。

不难看出：
$$
s(n)\subset A，则n\in A 
$$

【定理2】

若s(n)=a,b 显然到n时，轮到谁走谁赢。

所以我们用一个函数f(n)描述到达n时谁走 如果是a先走，f=A 反之f=B.如果有向图就是树结构，那么f的值是确定的
所以当$s(n)=(a,b)时 s(n)\subset f(n)$

根据以上两条规则，在树结构中足以递推计算出每个节点属于A还是属于B了。由叶子往根推即可，由此，可以构造出必胜策略。

**二、这个图不是树**


但如果图不是树 那么f的值就不确定
到n时可能轮到a也可能轮到b。
考虑一个例子。s(1)=2，3
s(2)=3，s(3)=a,b
那么a如何确定必胜策略？
首先a要保证到3时自己先行。所以a选择走2。
那么推广一下，也就是说，a和b希望能抢到图里任何一个符合条件的点x的控制权，其中s(x)=(a,b)
这样的点可能有很多个。当双方在争抢其中一个的半路上可能又会碰到另一个x'。所以问题被转化为：
所有点x构成的集合X，两人最终谁最先能抢到这个集合中的任意一个？

为了解决这个问题，我们假设X中有m个点$x_1,x_2,...x_m$
且第i个点有$c_i$条通向它的可能的路径p
我们把这些路径按**长度从小到大重新排序**以后，写出来就是：
$$

p_{11},p_{12},...p_{13},p_{1c_1}\\
p_{21},p_{12},...p_{23},p_{1c_2}\\
...\\
p_{m1},p_{m2},...p_{m3},p_{mc_m}\\
$$
记为集合$\mathbb{P}$。
如果p的路径长度是偶数，那么到达p时是a先行，此时a必胜，反之b必胜。
假设a和b都是尽全力去抢集合X中的点。第一步由A先走，那么他会选择所有偶数路径中的一条才能取胜。并且，这条路径还会受到B的破坏。如果A无论在他的回合怎么走，B都能破坏使路线偏移到奇数长的路径集合中去，那么显然B必胜，反之则是A必胜。


是否可能A和B最终的结果不在集合X中呢？这是不可能的。因为X被定义为是所有子节点为(a,b)节点的前驱的集合。从所有获胜局面出发进行遍历，它们的前驱如果不在X中，那就必然在A或者B中，这么层层往上，一定最终会到达X节点。所以从原点出发必然会先经过X节点，再到达A和B节点。

所以无论A和B怎么走，它们最后得到的路径一定是在$\mathbb{P}$中的。
也即，当A走出第一步以后，无论B走哪，此时两人走过的路径一定还是$\mathbb{P}$中**某个路径p的最初两步**。（当然，可能不止一个元素p符合这两步）因为无论A和B怎么走，他们目前的走法都是被考虑进了“通向X的所有可能路径中的”，因而是在$\mathbb{P}$中的

那么，能不能得到一个算法，用它来构造A的必胜策略？

首先，集合$\mathbb{P}$中，有些路径是另一些路径的子路径（即在达到一个x节点的路上已经遇到了一个x节点了），此时，对于足够明智的对弈双方，此时就会在这里决出胜负。我们将P中那些连续通过了不止一个X节点的路径全部删掉，得到另一个集合$\mathbb{P}+$。
显然从$\mathbb{P}+$中任取两条路径p和p'，它们彼此都不是对方的子路径。虽然p和p'可能会有若干路段是重合的，这样重合的路段也可能有若干段，但它们终点一定各不相同。

我们从原点出发，尝试随意画几条$\mathbb{P}+$中的曲线，观察它们有什么特征。可以看到所有的X节点都集中在一段，另一端是原点，而中间会有一个类似网状的结构，像一个渔网。这是我们对$\mathbb{P}+$的大致印象。**没有X节点会在这些网的内部**。下面我们开始思考能不能为这些网构造一个必胜策略。

注意这些网中，那些边的长度是无所谓的。重要的是边长度的奇偶性。同时，这些边还会有交点，记所有交点的集合为G，我们感兴趣的是对每一个交点，如何推断到达这个地方时，此时到底是轮到谁先走。
注意到那些和I相连的交点G'，走到它们时轮谁先走是确定的。对于那些只有一个前驱，且前驱是G'中的点，轮到谁先走也是确定的。








所以，如果两个人都竭尽全力去抢集合X中的点，最终两人走的路线一定是$p_{i1}$中最短的那一条$p^*$，用|p|表示路径长度，
那么|p^*|是偶数时，a抢到那个点。反之则是b抢到。

由此，我们可以就回答了A和B谁能抢到集合X中的任意一个点，那个点是什么。——能抢到的点是p^*所对应的x，是谁取决于那条路径是奇数还是偶数。



举个例子，假设s(1)=2,3,4，   s(3)=5, s(5)=4
且3,4,\in X
那么


有些图的状态不行 比如1256 这可能合乎游戏规则。但是它没有胜负。所以，我们认为这种图不会出现在博弈游戏中：它避开了所有胜负节点，并且拐进了死路。出于简便，这种图我们不考虑它的存在。

【游戏规则的抽象化】
所以符合博弈规则的图只有两种：
1是有向的树。

2是有向的图且有环，而且自连通的环上任何一个点的后继里如果没有ab 就必须有环外的点。（否则游戏就会陷入死局，无胜负）
规定两个节点之间可以有相反的边。

3 路径不重复

4 无论在哪个环的哪个节点出发 最终一定会到达AB节点

假设现在状态已经到了点S S通向n的路径P有且仅有k条不相交的路径p1 p2 pk。其中奇数长的路径存在 那么f(n）= f(s) 如果都是偶数长，那么f(n)=取反f(k) 
显然P不为空。因为S可以设为N的任意一个前驱x 即n属于s(x)
可是这么思考会有问题。因为s可能不止一个。
例如12 134 24 25 46 65 5a 5b 那么分别令s=2，s=4不就出现矛盾了吗？所以，到5的时候究竟应该轮到谁呢？
首先，A可以自行决定是到2还是到4。
而f2=B f4=A 所以a肯定会希望到4。那么A的最佳策略是到4。所以如果我们考虑最佳策略下的F，那么F5=A 这是因为 此时S=4
S为什么会等于4？这是由更前面的节点状态得来的。
观察一下这个例子会发现，光是研究2和4是不够的。虽然这两个点“等价”所以到了其中一个以后，很容易分析出谁赢。但是它们的前驱决定了谁有决定权能到其中的哪一个。在这个例子中，A决定了是能到2还是4。实际上6和2和4也是等价的。





初始节点为I 节点n的后
从最简单的情况出发，逐渐增加节点。
比如，只有三个节点，初始节点，分别连接到a胜（记为A节点）和b胜，节点B
那么A先走，A有必胜策略。
这个时候如果再增加深度>1的分支是没有用的，还是A必胜。

所以考虑从I到A或B 深度至少为2的树
注意到如果一群兄弟节点每一个都是A必胜，那么父节点也是A必胜。所以，讨论的情况被缩减为，所有获胜节点的兄弟节点至少有一个是B 注意它的兄弟一定是获胜节点

收益率也跟存钱时长有关

傅里叶
可以拿棋盘格再来试一下看频谱的峰出现在哪