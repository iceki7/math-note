​
来自3B1B.

任意排列的n种宝石经过最多n刀切分，可以被分为两个串集合，每个集合里每种宝石数量都相同(宝石都为偶数个)。

由于连续版本的项链分赃问题如果证明能实现，则离散版本也能实现，下面先考虑连续版本：

如果项链只有两种宝石，且长度为1，那么等于找一个数对(a,b,c)

使得a+b+c=1，设小偷1的两种宝石的数量为(m,n)=A(a,b,c)

不难看出A是连续变换，即 $\lim_{a\rightarrow a0} A(a,b,c)=A(a_0,b,c)$

设a=x2,b=y2,c=z2。

也就是将分割方案(a,b,c)映射到了球面上的两点，规定当x>0时，a代表的线段分给小偷1，否则分给小偷2。

由此，球面上的一点就对应了一种分赃方案，而(m,n)=A(a,b,c)=A(x2,y2,z2)是一个连续变换。

由Borsuk-Ulam定理可知，存在x0,y0,z0使得：B(x0,y0,z0)=B(-x0,-y0,-z0)

因此，方案(x0,y0,z0)可使得小偷1和小偷2的两种宝石的数量分别相同。

也就证明了，n=2时的项链分赃问题。

即最多通过2刀，可使得小偷1、2拿到相同数量的同种宝石。

n>2时的情形，可由任意维度的Borsuk-Ulam定理解决。

**Ulam定理在3维的证明**
由于映射f连续，因此当在球上连续运动时，它的映射在二维平面上也是连续运动的。
记映射g(v)=f(v)-f(-v)，即要证明存在v'使得g(v)=(0,0)
由于g(-v)=-g(v)，因此在取球上的大圆在映射后是一个以原点为中心对称的图案K。
现在，将大圆在球面上收缩到极点。映射后的结果也由K收缩到一点，因此在收缩的过程中必有一刻该闭合曲线经过(0,0)
因此存在v使得g(v)=0，也即映射过程中对拓点存在。

​**几何解释**
将一个n维球体压缩到n-1维时，如果变换连续，就会存在对拓点重合。

将长为k的项链分成n串（不为0），求分法数s(n,k)，使用DP：
s(n,k)=\sum_{i=1}^{k-n-1} s(n-1,k-i)=\sum_{j=n+1}^{k-1}s(n-1,j)


----
**另一个几何证明**


这个证明是针对只有两种宝石的情况。

分割无非就是类似于下面的串，给它划两刀。
01|010011|1001

要研究的问题是，A的数量和B的数量等同（2n个），随机排列，要求用尽量少的刀数把它们均分。


为了先建立一些直觉，我们先来看如何表示（或者说编码）分割。

第一个灵感是，将串看作是一个二进制的数字，可是分割该看作什么呢？表示为对2^n取模吗？似乎不是很方便。

第二个灵感是，将串看作是一条折线L。从原点出发，0表示向右走，1表示向上走。


这种表示最关键的**优势**在于：

    1. 我们可以很方便地统计出来切了一刀以后，子串里0和1的数量——就是切割点的横纵坐标。
    2. 折线的终点是固定的。因为项链其实只是4n个宝石的不同排列，所以折线的终点是(2n,2n)。

所以，沿着这个思路，折线代表项链。折线上的所取的若干个点（严格来说是整点，也即x，y都是整数）代表切割的位置。
而两种宝石的数量直接对应到横纵坐标。
（当然这样表示，意味着这个证明可能不好推广到宝石种类更多的情况，那样需要研究高维情况下的几何问题，但我们暂时不管）


然后我们考虑一下如何形式化地表示证明。首先，项链是一条折线L，它的两个端点分别是(0,0)和(2n,2n).在这个折线上找若干个切割点坐标$d$，假设它们沿着折线的排列顺序为$d_1,d_2,...d_n$
由于切割点的坐标给出了切割点左侧的宝石的数量。
所以第n段的宝石数量为(减法表示分量对应相减)

$$
d_n-d_{n-1}
$$



先划第一刀。如果1刀就能解决问题，那么$d_1=(n,n)$，显然，这等价于折线经过(n,n)。

然后划第2刀。如果第1刀没有解决问题但第2刀解决了问题，那么显然是中间那一段项链里两种宝石各有n个。此时，要求$d_2-d_1=(n,n)$，

这个表达式能不能也找到几何含义呢？能：d2-d1，可以视为是把点d1平移到原点，然后考虑d2点能否通过(n,n)。

当然，由于运动的相对性。我们可以考虑不移动直线，而是移动坐标系，把原点移动到d1处。并观察第一象限内的折线是否经过(n,n)。这样比移动折线似乎更直观一些。


现在，我们详细描述一下L的运动路线：假设L不经过(n,n)（也即1刀不能完成任务）。为了方便表述，我们先以(n,n)为中心，(0,0),(2n,2n)为左下-右上端点，把平面划分成4个部分，并从右上角逆时针编号为1,2,3,4区域。那么，当L离开区域3之后，它就进入了区域2或区域4，不失一般性假设它进入了区域4，设它在区域3、4上的交点为S，类似地，设它从4区域进入1区域时的交点为T。

然后，我们开始平移坐标系。观察移动中的坐标系中的(n,n)点能否与直线有交点。根据前面的分析，如果产生了交点，说明可以用第2刀来平分。

随后最关键的部分来了：点(n,n)最初位于L的**左上方**（因为假设L进入了区域4），在坐标系原点平移到S时，此时的(n,n)已经被平移到了L的**右下方**。所以，在这个平移的过程中，(n,n)穿过了直线L！所以第2刀必然能够找到一个位置平分L。


证明结束。但还有许多值得玩味的地方。


首先，我们能在多大程度上确认这个点d2的位置呢？注意到平移的过程中，在不超过点S时就能产生重合，说明此时d1的位置在区域3内取得。（但这也是废话，离开区域3后其中一种宝石的数量就超过n了）

此外，这只是一个存在性证明。它对于改进求出这个点的时间复杂度似乎没有帮助。


通过这个证明我们还会发现，如果想要沿着另一个思路，尝试去构造这个切刀的位置（给出具体的位置的表达式）是多么困难


推广到更高维度（即x种项链，每种项链2n个）时问题就没这么简单了。可以做出的几个观察是：


1.如果当切k刀时有解，切k-1刀时无解，则两个人势必拿的是项链中**不相邻**的段。否则如果拿相邻的，这等价于k-1刀时是有解的。

2.平移坐标系的方法不能使用了。因为要计算不连续的段的和。而且二维空间中这样简单的几何视角也消失了。

---END---
