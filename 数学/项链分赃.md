​
来自3B1B.

任意排列的n种宝石经过最多n刀切分，可以被分为两个串集合，每个集合里每种宝石数量都相同(宝石都为偶数个)。

由于连续版本的项链分赃问题如果证明能实现，则离散版本也能实现，下面先考虑连续版本：

如果项链只有两种宝石，且长度为1，那么等于找一个数对(a,b,c)

使得a+b+c=1，设小偷1的两种宝石的数量为(m,n)=A(a,b,c)

不难看出A是连续变换，即 $\lim_{a\rightarrow a0} A(a,b,c)=A(a_0,b,c)$

设a=x2,b=y2,c=z2。

也就是将分割方案(a,b,c)映射到了球面上的两点，规定当x>0时，a代表的线段分给小偷1，否则分给小偷2。

由此，球面上的一点就对应了一种分赃方案，而(m,n)=A(a,b,c)=A(x2,y2,z2)是一个连续变换。

由Borsuk-Ulam定理可知，存在x0,y0,z0使得：B(x0,y0,z0)=B(-x0,-y0,-z0)

因此，方案(x0,y0,z0)可使得小偷1和小偷2的两种宝石的数量分别相同。

也就证明了，n=2时的项链分赃问题。

即最多通过2刀，可使得小偷1、2拿到相同数量的同种宝石。

n>2时的情形，可由任意维度的Borsuk-Ulam定理解决。

**Ulam定理在3维的证明**
由于映射f连续，因此当在球上连续运动时，它的映射在二维平面上也是连续运动的。
记映射g(v)=f(v)-f(-v)，即要证明存在v'使得g(v)=(0,0)
由于g(-v)=-g(v)，因此在取球上的大圆在映射后是一个以原点为中心对称的图案K。
现在，将大圆在球面上收缩到极点。映射后的结果也由K收缩到一点，因此在收缩的过程中必有一刻该闭合曲线经过(0,0)
因此存在v使得g(v)=0，也即映射过程中对拓点存在。

​**几何解释**
将一个n维球体压缩到n-1维时，如果变换连续，就会存在对拓点重合。

将长为k的项链分成n串（不为0），求分法数s(n,k)，使用DP：
s(n,k)=\sum_{i=1}^{k-n-1} s(n-1,k-i)=\sum_{j=n+1}^{k-1}s(n-1,j)


----
**另一个几何证明**


这个证明中，分割方案用坐标轴上的一个点来表示。


AB|ABAABB|BAAB

先讨论足够简单的情况：

A的数量和B的数量都是2n个，要求2刀均分。


坐标系xOy。 如果只划一刀，我们只考虑左边的，刀划的位置唯一确定了A,B的数量，我们画在坐标系中。在每个位置都切一下，就得到了一条关于切割位置的折线

$L(t),0\leq t\leq 4n$

所以$L(4n)=(2n,2n),L(0)=(0,0)$

值得注意的是$L(t+1)=L(t)+(1,0)或者(0,1)$，但L不一定经过点$N=(n,n)$，所以切一刀肯定不能保证。


如果是切两刀，等于先切一刀，再把剩下的切一刀。所以，先在f上找一个位置m切一刀，接下来在右边那串上再切一刀。一样，只关注第二刀的左边那串上的数目，于是又形成了一个路径$L'$。
关于切割位置的编号，为了方便，我们假设$L和L'$都是用的同一种编号。

所以，对于$L'(t)  ，  m\leq t\leq 4n，且\\L'(t)=L(t)-L(m)$

所以，$L'$只是$L$在$t\in [m,4n]$这一段的平移，使线段的左下端点被平移到原点。



假设$L$不过$N$，那么问题就被转化为能不能找到一个$L'$，使得L'过N？

（因为只切一刀时，如果左侧的项链不能满足数量相等，那只可能是切两刀时中间那一段满足数量相等）
显然$m\leq 2n$,否则$L'$根本就到不了x=n的位置


问题等价于：平移$N$，问是否存在m使得$N+L(m)$落在$L$上。

注意$K(m)=N+L(m)$也是一条折线段。

如果变动$m\in[0,2n]$,那么K实际上就是L的前半段。也就是问如果以N为原点画出L的前半段，它能不能与L有交点。

为了说明这一点，以N为中心把正方形分成四个区域，从右上开始逆时针是区域1，2，3，4。假设L没经过N，它是从下方绕过去的，那么折线先后经过3-4-1。

显然L离开区域3时的长度$\leq 2n$，离开区域4时的长度$\geq 2n$，所以L的一半，应该包括L在区域3内的全部，和在区域4内某一小段。

将这部分移动到N那里，它和L在4区域里的部分必定相交。





---

拓展：
1.拓展到高维空间
此时要寻找F'',F'''，我们想证明的是，如果F和F'均不过(n,n,n)，那么F''肯定过(n,n,n)（F和F'都不过nn的意思可以理解为切3刀，无论是取左边第1段还是第2段，都无法符合要求，所以肯定要同时取第1和第3段才符合要求。）
它等价于有连接立方体对角线的折线L，不经过N。
而且，这条曲线的前一半移动到N以后，不与L相交。

假设第二刀切在m'处，
设
$L''(t)=L(t)-L(m')$

那么就是在问变动m,m'，
$$
L''(t)+L(m)=L(t)-L(m')+L(m)
$$
能否过N。

类似地，如果L,...L_s都不过N，
但是能够均分，两人势必**交错**拿每一段项链，而不是拿连续的两段。否则，更少的刀数就能解决问题。
所以就是在问
$$
L^{s+1}(t)=L(t)-L(m_s)+L(m)-L(m_{s-1})+...
是否过N\\其中1\leq m_1<m_2<m_3....<m_s\leq sn



$$

---

2.拓展到A、B数量不相同的情形，它们的数量是$2n_a，2n_b$个，要求分别均分a和b。

这只是把正方形变成了矩形。
